!function(e){var i=null;e.fn.resizableColumns=function(n){var t=1==(n=n||{}).destroy,s=!1,o=0,d=e(this),r=e(this).get(0),u=e(this).find("thead").first().find("tr").last();t?u.find("th").each(function(){e(this).find("div.resizer").remove()}):u.find("th").each(function(){e(this).css("position","relative"),e(this).is(":not(.no-resize)")&&0==e(this).find("div.resizer").length&&e(this).append("<div class='resizer' style='position:absolute;top:0px;right:-3px;bottom:0px;width:6px;z-index:999;background:transparent;cursor:col-resize'></div>")}),r.handler_doc_mouseup&&(e(document).unbind("mouseup",r.handler_doc_mouseup),delete r.handler_doc_mouseup),t||(r.handler_doc_mouseup=function(e){u.find("th").removeClass("resizing"),s=!1,e.stopPropagation(),"function"==typeof n.resized&&i==r&&n.resized(n.name||i.id)},e(document).bind("mouseup",r.handler_doc_mouseup));var h=d.find(".resizer");(h.unbind("click"),h.unbind("mousedown"),t||(h.bind("mousedown",function(n){0==n.button&&(u.find("th").removeClass("resizing"),u.find("th:nth-child("+(e(this).closest("th").index()+1)+") .resizer").closest("th").addClass("resizing"),o=n.pageX,s=!0),n.stopPropagation(),i=null}),h.bind("click",function(e){return!1})),r.handler_mousemove&&(d.unbind("mousemove",r.handler_mousemove),delete r.handler_mousemove),t||(r.handler_mousemove=function(e){if(s){var n=u.find("th.resizing .resizer");if(1==n.length){var t=(e.pageX||0)-o,h=n.closest("th").innerWidth()+t,a=d.width()+t;0!=o&&0!=t&&h>50&&a>100&&(n.closest("th").innerWidth(h),o=e.pageX,d.width(a)),i=r}}},d.bind("mousemove",r.handler_mousemove)),t)||(r.style.width||(r.style.width=d.width()+"px"))}}(jQuery);
